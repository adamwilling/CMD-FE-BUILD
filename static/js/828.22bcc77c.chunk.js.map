{"version":3,"file":"static/js/828.22bcc77c.chunk.js","mappings":"sUAiBMA,EAAcC,EAAQ,MAoO5B,UAlOwB,WACpB,IAAMC,GAASC,EAAAA,EAAAA,IAAYC,EAAAA,IAAmBF,OACxCG,GAAYF,EAAAA,EAAAA,IAAYC,EAAAA,IAAmBC,UAC3CC,GAAaH,EAAAA,EAAAA,IAAYC,EAAAA,IAAmBE,WAE5CC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACXC,GAAaC,EAAAA,EAAAA,MAEnB,GAAsCC,EAAAA,EAAAA,UAAS,CAC3CC,KAAM,IADV,eAAOC,EAAP,KAAoBC,EAApB,KAGA,GAA8CH,EAAAA,EAAAA,UAAS,CACnDI,gBAAiB,GACjBC,WAAY,GACZC,UAAW,GACXC,eAAgB,GAChBC,aAAc,KALlB,eAAOC,EAAP,KAAwBC,EAAxB,MAQAC,EAAAA,EAAAA,YAAU,WAGN,GAFAC,SAASC,MAAQ,yBAEbjB,EAASkB,OAAOC,OAAS,EAAG,CAI5B,IAHA,IAAMC,EAAS7B,EAAY8B,MAAMrB,EAASkB,QACtCI,EAAY,CAAC,EAEjB,MAA2BC,OAAOC,QAAQJ,GAA1C,eAAmD,CAA9C,sBAAOK,EAAP,KAAYC,EAAZ,KACW,SAARD,IAGJH,EAAUG,GAAOC,EACpB,CAEDnB,EAAee,EAClB,CACJ,GAAE,KAEHP,EAAAA,EAAAA,YAAU,WACNjB,GAAS6B,EAAAA,EAAAA,IAAgB,CACrBP,OAAQd,EACRsB,QAASf,IAEhB,GAAE,CAACP,EAAaO,KAEjBE,EAAAA,EAAAA,YAAU,WACN,IAAMc,EAAa7B,EAAS8B,SAAW,IAAMvC,EAAYwC,UAAUzB,GACnEJ,EAAW2B,GACX/B,GAAS6B,EAAAA,EAAAA,IAAgB,CACrBP,OAAQd,EACRsB,QAASf,IAEhB,GAAE,CAACP,EAAaO,IAEjB,IAOMmB,EAAa,SAACC,GACU,OAAtB3B,EAAY4B,OAAmB5B,EAAY4B,MAOhB,QAAtB5B,EAAY4B,MACjB3B,GAAe,kBACRD,GADO,IAEV6B,KAAMF,EACNC,MAAO,UAIX3B,GAAe,kBACRD,GADO,IAEV6B,KAAM,KACND,MAAO,QAjBX3B,GAAe,kBACRD,GADO,IAEV6B,KAAMF,EACNC,MAAO,QAiBlB,EAED,OACI,UAAC,IAAD,CAAWE,OAAK,EAAhB,WACI,UAAC,IAAD,CAAWA,OAAK,EAAhB,WACI,iBAAKC,UAAU,wEAAf,WACI,gBAAKA,UAAU,uCAAf,sDAGA,gBAAKA,UAAU,SACf,gBAAKA,UAAU,0CAAf,UACI,SAAC,IAAD,OAEJ,gBAAKA,UAAU,0CAAf,UACI,SAAC,IAAD,CAAiBxB,gBAAiBA,EAAiBC,mBAAoBA,EAAoBwB,KAAK,cAGxG,iBAAKD,UAAU,kDAAf,WACI,SAAC,KAAD,CAASE,GAAG,aAAaC,KAAG,EAA5B,SAEQ,gBAAGC,EAAH,EAAGA,SAAH,OAAkB,SAAC,IAAD,CAAQJ,UAAU,eAAeK,SAASC,EAAAA,EAAAA,GAAK,CAAE,QAAWF,EAAU,mBAAoBA,IAA1F,6BAAlB,KAKR,SAAC,KAAD,CAASF,GAAG,2BAAZ,SAEQ,gBAAGE,EAAH,EAAGA,SAAH,OAAkB,SAAC,IAAD,CAAQJ,UAAU,eAAeK,SAASC,EAAAA,EAAAA,GAAK,CAAE,QAAWF,EAAU,mBAAoBA,IAA1F,mDAAlB,KAKR,SAAC,KAAD,CAASF,GAAG,2BAAZ,SAEQ,gBAAGE,EAAH,EAAGA,SAAH,OAAkB,SAAC,IAAD,CAAQJ,UAAU,eAAeK,SAASC,EAAAA,EAAAA,GAAK,CAAE,QAAWF,EAAU,mBAAoBA,IAA1F,qDAAlB,QAMZ,sBAEJ,UAAC,IAAD,CAAWL,OAAK,EAAhB,WACI,iBAAKC,UAAU,2BAAf,WACI,gBAAKA,UAAU,aACf,gBAAKA,UAAU,mBAAf,UACI,kBACIA,UAAU,2BACVO,QAAS,kBAAMZ,EAAW,mBAAjB,EAFb,mDAM8B,qBAArB1B,EAAY6B,MAAqD,QAAtB7B,EAAY4B,OAAmB,SAAC,MAAD,IAC/C,qBAArB5B,EAAY6B,MAAqD,SAAtB7B,EAAY4B,OAAoB,SAAC,MAAD,KACxE,SAAC,MAAD,UAItB,gBAAKG,UAAU,gBAAf,UACI,kBACIA,UAAU,2BACVO,QAAS,kBAAMZ,EAAW,sBAAjB,EAFb,6CAM8B,wBAArB1B,EAAY6B,MAAwD,QAAtB7B,EAAY4B,OAAmB,SAAC,MAAD,IAClD,wBAArB5B,EAAY6B,MAAwD,SAAtB7B,EAAY4B,OAAoB,SAAC,MAAD,KAC3E,SAAC,MAAD,UAItB,gBAAKG,UAAU,mBAAf,UACI,iBACIA,UAAU,YACVO,QAAS,kBAAMZ,EAAW,gBAAjB,EAFb,+CAOJ,gBAAKK,UAAU,sBAAf,UACI,kBACIA,UAAU,2BACVO,QAAS,kBAAMZ,EAAW,iBAAjB,EAFb,6BAM8B,mBAArB1B,EAAY6B,MAAmD,QAAtB7B,EAAY4B,OAAmB,SAAC,MAAD,IAC7C,mBAArB5B,EAAY6B,MAAmD,SAAtB7B,EAAY4B,OAAoB,SAAC,MAAD,KACtE,SAAC,MAAD,UAItB,gBAAKG,UAAU,kBAAf,UACI,kBACIA,UAAU,2BACVO,QAAS,kBAAMZ,EAAW,gBAAjB,EAFb,+BAM8B,kBAArB1B,EAAY6B,MAAkD,QAAtB7B,EAAY4B,OAAmB,SAAC,MAAD,IAC5C,kBAArB5B,EAAY6B,MAAkD,SAAtB7B,EAAY4B,OAAoB,SAAC,MAAD,KACrE,SAAC,MAAD,YAMX,YAAXzC,GACI,SAAC,IAAD,IACW,UAAXA,GACA,gBAAK4C,UAAU,mBAAf,6FAEA,iBAAKA,UAAU,2BAAf,iBAEQzC,QAFR,IAEQA,OAFR,EAEQA,EAAWiD,KAAI,SAACC,GAAD,OACX,SAAC,IAAD,CAEIC,aAAcD,GADTA,EAASE,GAFP,IAQO,KAAb,OAATpD,QAAS,IAATA,OAAA,EAAAA,EAAWuB,SACP,SAAC,SAAD,CAAW8B,MAAM,SAAjB,8CAGA,SAKpB,SAAC,IAAD,CACIpD,YAAU,kBACHA,GADG,IAENQ,KAAMC,EAAYD,OAEtB6C,aArKS,SAACC,GACtB5C,GAAe,kBACRD,GADO,IAEVD,KAAM8C,IAEb,SAqKJ,C","sources":["views/proposals/ProposalsForAll.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { NavLink, useLocation, useNavigate } from 'react-router-dom'\r\nimport { AiOutlineSortAscending, AiOutlineSortDescending } from 'react-icons/ai'\r\nimport { BiSortAlt2 } from 'react-icons/bi'\r\nimport { Button, Card, Container } from 'react-bootstrap'\r\nimport clsx from 'clsx'\r\n\r\nimport { getProposalList } from '~/redux/proposalsSlice'\r\nimport { proposalsSelector } from '~/redux/selectors'\r\nimport AppPagination from '~/components/AppPagination'\r\nimport Loading from '~/components/Loading'\r\nimport ProposalRow from './ProposalRow'\r\nimport AddProposal from './ProposalsFeatures/AddProposal'\r\nimport FiltersAdvanced from './ProposalsFeatures/FiltersAdvanced'\r\n\r\nconst queryString = require('query-string')\r\n\r\nconst ProposalsForAll = () => {\r\n    const status = useSelector(proposalsSelector).status\r\n    const proposals = useSelector(proposalsSelector).proposals\r\n    const pagination = useSelector(proposalsSelector).pagination\r\n\r\n    const dispatch = useDispatch()\r\n    const location = useLocation()\r\n    const navigation = useNavigate()\r\n\r\n    const [filtersBase, setFiltersBase] = useState({\r\n        page: 1\r\n    })\r\n    const [filtersAdvanced, setFiltersAdvanced] = useState({\r\n        proposalTypeIds: [],\r\n        creatorIds: [],\r\n        statusIds: [],\r\n        createDateFrom: \"\",\r\n        createDateTo: \"\",\r\n    })\r\n\r\n    useEffect(() => {\r\n        document.title = \"Đề xuất\"\r\n\r\n        if (location.search.length > 0) {\r\n            const params = queryString.parse(location.search)\r\n            let newParams = {}\r\n\r\n            for (const [key, value] of Object.entries(params)) {\r\n                if (key !== \"page\") {\r\n                    continue\r\n                }\r\n                newParams[key] = value\r\n            }\r\n\r\n            setFiltersBase(newParams)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        dispatch(getProposalList({\r\n            params: filtersBase,\r\n            filters: filtersAdvanced\r\n        }))\r\n    }, [filtersBase, filtersAdvanced])\r\n\r\n    useEffect(() => {\r\n        const requestUrl = location.pathname + \"?\" + queryString.stringify(filtersBase)\r\n        navigation(requestUrl)\r\n        dispatch(getProposalList({\r\n            params: filtersBase,\r\n            filters: filtersAdvanced\r\n        }))\r\n    }, [filtersBase, filtersAdvanced])\r\n\r\n    const handlePageChange = (newPage) => {\r\n        setFiltersBase({\r\n            ...filtersBase,\r\n            page: newPage\r\n        })\r\n    }\r\n\r\n    const handleSort = (sortBy) => {\r\n        if (filtersBase.order === null || !filtersBase.order) {\r\n            setFiltersBase({\r\n                ...filtersBase,\r\n                sort: sortBy,\r\n                order: \"asc\"\r\n            })\r\n        }\r\n        else if (filtersBase.order === \"asc\") {\r\n            setFiltersBase({\r\n                ...filtersBase,\r\n                sort: sortBy,\r\n                order: \"desc\"\r\n            })\r\n        }\r\n        else {\r\n            setFiltersBase({\r\n                ...filtersBase,\r\n                sort: null,\r\n                order: null\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container fluid>\r\n            <Container fluid>\r\n                <div className=\"row justify-content-xl-between justify-content-end align-items-center\">\r\n                    <div className=\"col-auto fw-bolder fs-5 mb-xl-0 mb-3\">\r\n                        TẤT CẢ ĐỀ XUẤT\r\n                    </div>\r\n                    <div className=\"col\" />\r\n                    <div className=\"col-auto mb-xl-0 mb-3 d-sm-block d-none\">\r\n                        <AddProposal />\r\n                    </div>\r\n                    <div className=\"col-auto mb-xl-0 mb-3 d-sm-block d-none\">\r\n                        <FiltersAdvanced filtersAdvanced={filtersAdvanced} setFiltersAdvanced={setFiltersAdvanced} type=\"all\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex justify-content-start align-items-center\">\r\n                    <NavLink to=\"/proposals\" end>\r\n                        {\r\n                            ({ isActive }) => <Button className=\"col-auto m-1\" variant={clsx({ \"primary\": isActive, \"outline-primary\": !isActive })}>\r\n                                Tất cả\r\n                            </Button>\r\n                        }\r\n                    </NavLink>\r\n                    <NavLink to=\"/proposals/created-by-me\">\r\n                        {\r\n                            ({ isActive }) => <Button className=\"col-auto m-1\" variant={clsx({ \"primary\": isActive, \"outline-primary\": !isActive })}>\r\n                                Đề xuất của tôi\r\n                            </Button>\r\n                        }\r\n                    </NavLink>\r\n                    <NavLink to=\"/proposals/approve-by-me\">\r\n                        {\r\n                            ({ isActive }) => <Button className=\"col-auto m-1\" variant={clsx({ \"primary\": isActive, \"outline-primary\": !isActive })}>\r\n                                Đề xuất tôi duyệt\r\n                            </Button>\r\n                        }\r\n                    </NavLink>\r\n                </div>\r\n                <hr />\r\n            </Container>\r\n            <Container fluid>\r\n                <div className=\"proposal proposal-header\">\r\n                    <div className=\"ms-lg-5\" />\r\n                    <div className=\"proposal-creator\">\r\n                        <span\r\n                            className=\"fw-bolder cursor-pointer\"\r\n                            onClick={() => handleSort(\"pro.creator.name\")}\r\n                        >\r\n                            NGƯỜI ĐỀ XUẤT\r\n                            {\r\n                                (filtersBase.sort === \"pro.creator.name\" && filtersBase.order === \"asc\") ? <AiOutlineSortAscending />\r\n                                    : (filtersBase.sort === \"pro.creator.name\" && filtersBase.order === \"desc\") ? <AiOutlineSortDescending />\r\n                                        : <BiSortAlt2 />\r\n                            }\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"proposal-type\">\r\n                        <span\r\n                            className=\"fw-bolder cursor-pointer\"\r\n                            onClick={() => handleSort(\"pro.proposalType.id\")}\r\n                        >\r\n                            LOẠI ĐỀ XUẤT\r\n                            {\r\n                                (filtersBase.sort === \"pro.proposalType.id\" && filtersBase.order === \"asc\") ? <AiOutlineSortAscending />\r\n                                    : (filtersBase.sort === \"pro.proposalType.id\" && filtersBase.order === \"desc\") ? <AiOutlineSortDescending />\r\n                                        : <BiSortAlt2 />\r\n                            }\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"proposal-content\">\r\n                        <span\r\n                            className=\"fw-bolder\"\r\n                            onClick={() => handleSort(\"receiver.name\")}\r\n                        >\r\n                            MỤC ĐÍCH/LÝ DO\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"proposal-createDate\">\r\n                        <span\r\n                            className=\"fw-bolder cursor-pointer\"\r\n                            onClick={() => handleSort(\"pro.createDate\")}\r\n                        >\r\n                            NGÀY TẠO\r\n                            {\r\n                                (filtersBase.sort === \"pro.createDate\" && filtersBase.order === \"asc\") ? <AiOutlineSortAscending />\r\n                                    : (filtersBase.sort === \"pro.createDate\" && filtersBase.order === \"desc\") ? <AiOutlineSortDescending />\r\n                                        : <BiSortAlt2 />\r\n                            }\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"proposal-status\">\r\n                        <span\r\n                            className=\"fw-bolder cursor-pointer\"\r\n                            onClick={() => handleSort(\"pro.status.id\")}\r\n                        >\r\n                            TRẠNG THÁI\r\n                            {\r\n                                (filtersBase.sort === \"pro.status.id\" && filtersBase.order === \"asc\") ? <AiOutlineSortAscending />\r\n                                    : (filtersBase.sort === \"pro.status.id\" && filtersBase.order === \"desc\") ? <AiOutlineSortDescending />\r\n                                        : <BiSortAlt2 />\r\n                            }\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                {\r\n                    status === \"loading\" ? (\r\n                        <Loading />\r\n                    ) : status === \"error\" ? (\r\n                        <div className=\"text-center py-3\">Có lỗi trong quá trình lấy dữ liệu từ Server</div>\r\n                    ) : (\r\n                        <div className=\"list-group-horizontal-lg\">\r\n                            {\r\n                                proposals?.map((proposal) => (\r\n                                    <ProposalRow\r\n                                        key={proposal.id}\r\n                                        proposalInfo={proposal}\r\n                                    />\r\n                                ))\r\n                            }\r\n                            {\r\n                                proposals?.length === 0 ? (\r\n                                    <Card.Body align=\"center\">\r\n                                        Không có dữ liệu\r\n                                    </Card.Body>\r\n                                ) : null\r\n                            }\r\n                        </div>\r\n                    )\r\n                }\r\n                <AppPagination\r\n                    pagination={{\r\n                        ...pagination,\r\n                        page: filtersBase.page\r\n                    }}\r\n                    onPageChange={handlePageChange}\r\n                />\r\n            </Container>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default ProposalsForAll"],"names":["queryString","require","status","useSelector","proposalsSelector","proposals","pagination","dispatch","useDispatch","location","useLocation","navigation","useNavigate","useState","page","filtersBase","setFiltersBase","proposalTypeIds","creatorIds","statusIds","createDateFrom","createDateTo","filtersAdvanced","setFiltersAdvanced","useEffect","document","title","search","length","params","parse","newParams","Object","entries","key","value","getProposalList","filters","requestUrl","pathname","stringify","handleSort","sortBy","order","sort","fluid","className","type","to","end","isActive","variant","clsx","onClick","map","proposal","proposalInfo","id","align","onPageChange","newPage"],"sourceRoot":""}